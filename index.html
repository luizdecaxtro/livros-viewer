<script>
    const livros = {
        "1EMFEM24": {
            nome: "Empreendedorismo Feminino",
            id: "1_9dVOg-UZiHMwV9xOcANzcb9wefX3Ft2"
        },
        "2ELA25": {
            nome: "Elara",
            id: "1-6Kmt25p0awxQ6oc230DlgweFHCuzm1g"
        },
        "3MENTOR25": {
            nome: "Mentores Espirituais",
            id: "1ICgpTGj__RbQQcG2wP5jCtR2ZuyVKXKb"
        },
        "4MNINTE25": {
            nome: "Manual de Neg√≥cios na Internet",
            id: "1BIpdcLBC0u-GoEtvHBzL0axQE2fFmaFD"
        },
        "5OBEM25": {
            nome: "O Bem e o Mal",
            id: "1KU8aCEyLCuLXDB-S5zwsQjBDe799TwI7"
        },
        "6OSCCR21": {
            nome: "Os Caminhos do Cora√ß√£o",
            id: "1AcMzqyLXmnMd3HQcHEgUPZKvWKsuy7eZ"
        },
        "7PENTA23": {
            nome: "O Pentateuco",
            id: "1OvInGJdEdWR2KNDu8d1yQrZqOM33vBWS"
        },
        "8OPODIA24": {
            nome: "O Poder da Intelig√™ncia Artificial",
            id: "1muFknzYHuIaKGCNzwragM4_vAYusLQrS"
        },
        "9POEMA20": {
            nome: "Poemas",
            id: "1Us36x2Y_-3wVy6ZU24gc6DkISwPBoyKl"
        },
        "10PQLIB22": {
            nome: "Palavras que Libertam",
            id: "1eb7IBYHbukfiLmk8ITlzlcCd5A3-nlOh"
        }
    };

    function showMessage(text, type) {
        document.getElementById('messageArea').innerHTML = '<div class="message ' + type + '">' + text + '</div>';
        setTimeout(function() {
            document.getElementById('messageArea').innerHTML = '';
        }, 3000);
    }

    function searchFiles() {
        const codigo = document.getElementById('fileSearch').value.trim().toUpperCase();
        const livro = livros[codigo];

        if (!codigo) {
            showMessage('Por favor, digite o c√≥digo do livro.', 'error');
            return;
        }

        if (!livro) {
            showMessage('‚ùå C√≥digo inv√°lido ou livro n√£o encontrado.', 'error');
            return;
        }

        showMessage('‚úÖ Livro encontrado: ' + livro.nome, 'success');
        openFile(livro, codigo);
    }

    function openFile(livro, codigo) {
        document.getElementById('searchSection').style.display = 'none';
        document.getElementById('viewerSection').style.display = 'block';
        document.getElementById('viewerTitle').textContent = livro.nome;

        const linkPDF = `https://drive.google.com/uc?export=download&id=${livro.id}`;

        document.getElementById('pdfViewer').innerHTML =
            '<div style="text-align: center; padding: 20px;">' +
            '<h3>' + livro.nome + '</h3>' +
            '<p><strong>C√≥digo:</strong> ' + codigo + '</p>' +
            '<p><strong>Senha para abrir o PDF:</strong> LIBERAR2025</p>' +
            '<p style="margin: 20px 0;">Clique para abrir o PDF:</p>' +
            '<a href="' + linkPDF + '" target="_blank" class="pdf-button">üìñ Abrir PDF</a>' +
            '</div>';
    }

    function goBack() {
        document.getElementById('viewerSection').style.display = 'none';
        document.getElementById('searchSection').style.display = 'block';
    }

    document.getElementById('fileSearch').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') searchFiles();
    });

    window.onload = function() {
        showMessage('Sistema carregado!', 'success');
    };
</script>
